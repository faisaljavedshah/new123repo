
<div *ngIf="isLoading" class="loader-bg">
  <div class="loader">
    <span></span>
  </div>
</div>
<div style="height: 100%;">
  <div class="Teamresponsive" style="height: 100%;">


    <div  (clickOutside)="isSearching = false;">
      <app-bread-crumbs (newItemEvent)="onApplyGroups()"></app-bread-crumbs>
      <mat-toolbar [class.none]='isSearching' class="pt-2 pb-2 height_top">
        <mat-toolbar-row class="justify-content-between matToolbar">
          <div style="display: flex; align-items: center">
            <div  style="display: flex; align-items: center;">
              <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 44 44" fill="none">
                <rect width="44" height="44" rx="20" fill="#F4FAFF"/>
                <path d="M11.25 29C11.25 29.4142 11.5858 29.75 12 29.75C12.4142 29.75 12.75 29.4142 12.75 29H11.25ZM23.25 29C23.25 29.4142 23.5858 29.75 24 29.75C24.4142 29.75 24.75 29.4142 24.75 29H23.25ZM12.75 29C12.75 27.2142 14.2142 25.75 16 25.75V24.25C13.3858 24.25 11.25 26.3858 11.25 29H12.75ZM16 25.75H20V24.25H16V25.75ZM20 25.75C21.7858 25.75 23.25 27.2142 23.25 29H24.75C24.75 26.3858 22.6142 24.25 20 24.25V25.75Z" fill="#425466"/>
                <path d="M20.4997 15.9992C21.8997 17.3992 21.8997 19.5992 20.4997 20.8992C19.0997 22.1992 16.8997 22.2992 15.5997 20.8992C14.2997 19.4992 14.1997 17.3992 15.4997 15.9992C16.7997 14.5992 19.0997 14.6992 20.4997 15.9992" stroke="#425466" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M26 23.25C25.5858 23.25 25.25 23.5858 25.25 24C25.25 24.4142 25.5858 24.75 26 24.75V23.25ZM31.25 27C31.25 27.4142 31.5858 27.75 32 27.75C32.4142 27.75 32.75 27.4142 32.75 27H31.25ZM26 24.75H29V23.25H26V24.75ZM29 24.75C30.2858 24.75 31.25 25.7142 31.25 27H32.75C32.75 24.8858 31.1142 23.25 29 23.25V24.75Z" fill="#425466"/>
                <path d="M29.2999 16.6984C30.2999 17.6984 30.2999 19.2984 29.2999 20.1984C28.2999 21.0984 26.6999 21.1984 25.7999 20.1984C24.8999 19.1984 24.7999 17.5984 25.7999 16.6984C26.6999 15.7984 28.2999 15.7984 29.2999 16.6984" stroke="#425466" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              <p class="gau">Team</p>
            </div>
            <!-- <div class="dropdd">

            </div> -->
            <!-- <div (click)="openScrollableContent(longContent) ;" class="groupModal">
              {{currentGroup}}
            </div> -->
          </div>
          <!-- <div *ngIf="_teamService.totalUsers">
            <div style="display: flex; align-items: center"> -->
              <!-- <h6 class="onlinetext" style="font-size: 12px; color: #585556; font-weight: 400;  ">
                online
              </h6> -->
              <!-- <div  class="img marginR">
                <div class="img1">
                  <svg class="imgSize" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="16" fill="#FF8C82"/>
                    <mask id="mask0_7014_117002" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="32" height="32">
                    <circle cx="16" cy="16" r="16" fill="#C4C4C4"/>
                    </mask>
                    <g mask="url(#mask0_7014_117002)">
                    <ellipse cx="16" cy="28.1601" rx="12.16" ry="7.04" fill="#A10705"/>
                    </g>
                    <circle cx="16" cy="13.5998" r="5.76" fill="#A10705"/>
                    </svg>
                </div>
                <div class="img2">
                  <svg class="imgSize" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="16" fill="#8CD5FF"/>
                    <mask id="mask0_7014_117062" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="32" height="32">
                    <circle cx="16" cy="16" r="16" fill="#C4C4C4"/>
                    </mask>
                    <g mask="url(#mask0_7014_117062)">
                    <ellipse cx="16" cy="28.1601" rx="12.16" ry="7.04" fill="#002E99"/>
                    </g>
                    <circle cx="16" cy="13.5998" r="5.76" fill="#002E99"/>
                    </svg>
                </div>
                <div class="img3">
                  <svg class="imgSize" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="16" fill="#D1FF82"/>
                    <mask id="mask0_7014_117038" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="32" height="32">
                    <circle cx="16" cy="16" r="16" fill="#C4C4C4"/>
                    </mask>
                    <g mask="url(#mask0_7014_117038)">
                    <ellipse cx="16" cy="28.1601" rx="12.16" ry="7.04" fill="#206B00"/>
                    </g>
                    <ellipse cx="16" cy="13.5998" rx="5.76" ry="5.76" fill="#206B00"/>
                    </svg>
                </div>
                <div class="img4">
                  <svg class="imgSize" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="16" fill="#FFC27D"/>
                    <mask id="mask0_7014_117008" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="32" height="32">
                    <circle cx="16" cy="16" r="16" fill="#C4C4C4"/>
                    </mask>
                    <g mask="url(#mask0_7014_117008)">
                    <ellipse cx="16" cy="28.1601" rx="12.16" ry="7.04" fill="#A62100"/>
                    </g>
                    <ellipse cx="16" cy="13.5998" rx="5.76" ry="5.76" fill="#A62100"/>
                    </svg>
                </div>
              </div>
              <div
                class="marginR"
                style="font-size: 16px; font-weight: 600; color: #585556"
              >
                {{_teamService.activeUsers}} of {{_teamService.totalUsers}}
              </div>

            </div>
          </div> -->
        </mat-toolbar-row>
      </mat-toolbar>
      <div class="searchContainer" [class.none]="!isSearching">
        <div class="absolute mainDiv">
          <div class="inputContainer">
            <div class="flex" style="width: 100%;">
              <span
              *ngIf="searchingKeyword"
                    class="spinner-border spinner-border-sm mr-1"
                  ></span>
            <svg
            *ngIf="!searchingKeyword"
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 18 18"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M1.74658 8.05901C1.74658 4.57302 4.57253 1.74707 8.05852 1.74707C11.5445 1.74707 14.3705 4.57302 14.3705 8.05901C14.3705 9.79087 13.673 11.3598 12.5436 12.5003C12.536 12.5072 12.5286 12.5144 12.5213 12.5217C12.514 12.529 12.5069 12.5364 12.4999 12.544C11.3594 13.6734 9.79044 14.371 8.05852 14.371C4.57253 14.371 1.74658 11.545 1.74658 8.05901ZM13.0268 14.0878C11.6765 15.2018 9.94568 15.871 8.05852 15.871C3.74411 15.871 0.246582 12.3734 0.246582 8.05901C0.246582 3.7446 3.74411 0.24707 8.05852 0.24707C12.3729 0.24707 15.8705 3.7446 15.8705 8.05901C15.8705 9.9461 15.2013 11.6769 14.0874 13.0271L17.5336 16.4733C17.8265 16.7662 17.8265 17.2411 17.5336 17.534C17.2407 17.8269 16.7658 17.8269 16.473 17.534L13.0268 14.0878Z"
                  fill="#707070"
                />
              </svg>
              <input
                #seachInput
                class="search"
                type="text"
                (input)="searchingFor === 'recordings' ? searchRecordings($event.target.value):searchUsers($event.target.value); this.focusList = -1;"
                placeholder="Search"
                (keydown)="onUpDown($event)"
                [value]='searchValue'
              />
            </div>
            <div class="flex item-center">
              <span class="clearText pointer" (click)="clearFilterList();">Clear</span>
              <div class="verticalLine"></div>
              <span
                style="
                  height: 80%;
                  background-color: #425466;
                  width: 1px;
                  margin: 0 8px;
                "
              ></span>
              <svg
                (click)="isSearching = !isSearching"
                class="pointer"
                xmlns="http://www.w3.org/2000/svg"
                width="10"
                height="10"
                viewBox="0 0 10 10"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M1.53033 0.46967C1.23744 0.176777 0.762563 0.176777 0.46967 0.46967C0.176777 0.762563 0.176777 1.23744 0.46967 1.53033L3.93934 5L0.46967 8.46967C0.176777 8.76256 0.176777 9.23744 0.46967 9.53033C0.762563 9.82322 1.23744 9.82322 1.53033 9.53033L5 6.06066L8.46967 9.53033C8.76256 9.82322 9.23744 9.82322 9.53033 9.53033C9.82322 9.23744 9.82322 8.76256 9.53033 8.46967L6.06066 5L9.53033 1.53033C9.82322 1.23744 9.82322 0.762563 9.53033 0.46967C9.23744 0.176777 8.76256 0.176777 8.46967 0.46967L5 3.93934L1.53033 0.46967Z"
                  fill="#585556"
                />
              </svg>
            </div>
          </div>

          <div *ngIf="!isListOpen" class="lookingFor">
            <div class="lookingText">I'm looking for</div>
            <div class="buttons flex">
              <button
                (click)="searchingFor = 'people';"
                [ngClass]="{ activeButton: searchingFor === 'people' }"
                class="flex"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="22"
                  height="19"
                  viewBox="0 0 22 19"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M8 1.75C6.20507 1.75 4.75 3.20507 4.75 5C4.75 6.79493 6.20507 8.25 8 8.25C9.79493 8.25 11.25 6.79493 11.25 5C11.25 3.20507 9.79493 1.75 8 1.75ZM3.25 5C3.25 2.37665 5.37665 0.25 8 0.25C10.6234 0.25 12.75 2.37665 12.75 5C12.75 7.62335 10.6234 9.75 8 9.75C5.37665 9.75 3.25 7.62335 3.25 5ZM0.25 17C0.25 14.3766 2.37665 12.25 5 12.25H11C13.6234 12.25 15.75 14.3766 15.75 17V18C15.75 18.4142 15.4142 18.75 15 18.75C14.5858 18.75 14.25 18.4142 14.25 18V17C14.25 15.2051 12.7949 13.75 11 13.75H5C3.20507 13.75 1.75 15.2051 1.75 17V18C1.75 18.4142 1.41421 18.75 1 18.75C0.585786 18.75 0.25 18.4142 0.25 18V17ZM13.25 1C13.25 0.585786 13.5858 0.25 14 0.25C16.6234 0.25 18.75 2.37665 18.75 5C18.75 7.62335 16.6234 9.75 14 9.75C13.5858 9.75 13.25 9.41421 13.25 9C13.25 8.58579 13.5858 8.25 14 8.25C15.7949 8.25 17.25 6.79493 17.25 5C17.25 3.20507 15.7949 1.75 14 1.75C13.5858 1.75 13.25 1.41421 13.25 1ZM16.25 13C16.25 12.5858 16.5858 12.25 17 12.25C19.6234 12.25 21.75 14.3766 21.75 17V18C21.75 18.4142 21.4142 18.75 21 18.75C20.5858 18.75 20.25 18.4142 20.25 18V17C20.25 15.2051 18.7949 13.75 17 13.75C16.5858 13.75 16.25 13.4142 16.25 13Z"
                  />
                </svg>
                People
              </button>
              <button
                (click)="searchingFor = 'recordings';"
                [ngClass]="{ activeButton: searchingFor === 'recordings' }"
                class="flex"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                >
                  <path
                    d="M10 5.25C10.4142 5.25 10.75 5.58579 10.75 6V14C10.75 14.4142 10.4142 14.75 10 14.75C9.58579 14.75 9.25 14.4142 9.25 14V6C9.25 5.58579 9.58579 5.25 10 5.25Z"
                  />
                  <path
                    d="M7.75 7.33301C7.75 6.91879 7.41421 6.58301 7 6.58301C6.58579 6.58301 6.25 6.91879 6.25 7.33301V12.666C6.25 13.0802 6.58579 13.416 7 13.416C7.41421 13.416 7.75 13.0802 7.75 12.666V7.33301Z"
                  />
                  <path
                    d="M4.75 9.11084C4.75 8.69663 4.41421 8.36084 4 8.36084C3.58579 8.36084 3.25 8.69663 3.25 9.11084V10.8888C3.25 11.3031 3.58579 11.6388 4 11.6388C4.41421 11.6388 4.75 11.3031 4.75 10.8888V9.11084Z"
                  />
                  <path
                    d="M13.75 7.33301C13.75 6.91879 13.4142 6.58301 13 6.58301C12.5858 6.58301 12.25 6.91879 12.25 7.33301V12.666C12.25 13.0802 12.5858 13.416 13 13.416C13.4142 13.416 13.75 13.0802 13.75 12.666V7.33301Z"
                  />
                  <path
                    d="M16 8.36084C16.4142 8.36084 16.75 8.69663 16.75 9.11084V10.8888C16.75 11.3031 16.4142 11.6388 16 11.6388C15.5858 11.6388 15.25 11.3031 15.25 10.8888V9.11084C15.25 8.69663 15.5858 8.36084 16 8.36084Z"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M16.8943 16.8943C20.7019 13.0867 20.7019 6.91332 16.8943 3.10571C13.0867 -0.701905 6.91332 -0.701902 3.10571 3.10571C-0.701905 6.9133 -0.701902 13.0867 3.10571 16.8943C6.9133 20.7019 13.0867 20.7019 16.8943 16.8943ZM4.16637 4.16637C7.3882 0.944543 12.6118 0.944545 15.8336 4.16637C19.0551 7.38823 19.0553 12.6119 15.8336 15.8336C12.6118 19.0554 7.38818 19.0554 4.16637 15.8336C0.944543 12.6118 0.944546 7.38818 4.16637 4.16637Z"
                  /></svg
                >Recordings
              </button>
              <button
                (click)="searchingFor = 'tags';"
                [ngClass]="{ 'activeButton activeStroke': searchingFor === 'tags' }"
                class="flex tagStroke"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  class="tagStroke"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M6.48989 6.5382L3.41889 10.8382C2.92189 11.5332 2.92189 12.4682 3.41889 13.1632L6.48989 17.4632C6.86489 17.9882 7.47089 18.3002 8.11689 18.3002H18.9999C20.1049 18.3002 20.9999 17.4052 20.9999 16.3002V7.7002C20.9999 6.5952 20.1049 5.7002 18.9999 5.7002H8.11689C7.47089 5.7002 6.86489 6.0122 6.48989 6.5382Z"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M10.5728 10.7274C11.2757 11.4303 11.2757 12.57 10.5728 13.273C9.86984 13.9759 8.73015 13.9759 8.02721 13.273C7.32426 12.57 7.32426 11.4303 8.02721 10.7274C8.73015 10.0245 9.86985 10.0245 10.5728 10.7274"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  /></svg
                >Tags
              </button>
            </div>
          </div>

          <div *ngIf="false" #listContainer class="listContainer">
            <ng-container *ngIf="searchingFor === 'people'">
              <div class="userList flex pointer" [id]="'people_' + i" [ngClass]="focusList === i ? 'focusOnList':''" *ngFor="let item of searchedArr; let i = index" (click)="agentSelected(item);filterRecordigns(item.name);">
                <div class="userName">{{item.name}}</div>
                <div *ngIf="item.email" class="userMail">{{item.email}}</div>
              </div>
            </ng-container>
            <ng-container *ngIf="searchingFor === 'tags'">
              <div class="userList flex pointer" [id]="'tags_' + i"  [ngClass]="focusList === i ? 'focusOnList':''" *ngFor="let item of tagsArr; let i = index" (click)="seachInput.value = item; filterRecordigns(item)">
                <div class="userName">{{item}}</div>
              </div>
            </ng-container>
            <ng-container *ngIf="searchingFor === 'recordings'">
              <div class="userList flex pointer" [id]="'recordings_' + i" [ngClass]="focusList === i ? 'focusOnList':''" *ngFor="let item of recordingList; let i = index" (click)="seachInput.value = item; filterRecordigns(item)">
                <div class="userName">{{item}}</div>
              </div>
            </ng-container>
          </div>
          <div *ngIf="isListOpen" class="resultFound">
            <div class="resultCount">{{searchingFor === 'people' ? searchedArr.length:''}} {{searchingFor === 'tags' ? tagsArr.length:''}} {{searchingFor === 'recordings' ? recordingList.length:''}} results found for "{{searchValue}}": </div>
            <div class="resultList">
            <ng-container *ngIf="searchingFor === 'people'">
              <div class="userList flex pointer" [id]="'people_' + i" [ngClass]="focusList === i ? 'focusOnList':''" *ngFor="let item of searchedArr; let i = index" (click)="agentSelected(item);filterRecordigns(item.name);">
                <div class="userName">{{item.name}}</div>
                <div *ngIf="item.email" class="userMail">{{item.email}}</div>
              </div>
            </ng-container>
            <ng-container *ngIf="searchingFor === 'tags'">
              <div class="userList flex pointer" [id]="'tags_' + i"  [ngClass]="focusList === i ? 'focusOnList':''" *ngFor="let item of tagsArr; let i = index" (click)="seachInput.value = item; filterRecordigns(item)">
                <div class="userName">{{item}}</div>
              </div>
            </ng-container>
            <ng-container *ngIf="searchingFor === 'recordings'">
              <div class="userList flex pointer" [id]="'recordings_' + i" [ngClass]="focusList === i ? 'focusOnList':''" *ngFor="let item of recordingList; let i = index" (click)="seachInput.value = item; filterRecordigns(item)">
                <div class="userName">{{item}}</div>
              </div>
            </ng-container>
          </div>
          </div>
        </div>
      </div>
    </div>

<div *ngIf="!isLoading" class="tabs teamTabs" style="margin-bottom: 20px; height: 100%;">
  <mat-tab-group
    id="mainTab"
    [disableRipple]="true"
    [ngClass]="widthToggle ? 'testingclass' : 'testing_tabs'"
    class="testing_tabs"
    (selectedTabChange)=" getdate($event);"
  >
    <mat-tab label="Today" style="color: #718096 !important">
      <ng-container *ngIf="todayTab">
        <app-teams [getRange]="CurrentdateRange"></app-teams>
      </ng-container>
    </mat-tab>
    <mat-tab label="Week" style="color: #718096 !important">
      <ng-container *ngIf="weekTab">
        <app-teams [getRange]="CurrentdateRange"></app-teams>
      </ng-container>
    </mat-tab>
    <mat-tab label="Month" style="color: #718096 !important">
      <ng-container *ngIf="monthTab">
        <app-teams [getRange]="CurrentdateRange"></app-teams>
      </ng-container>
    </mat-tab>
    <mat-tab label="Quarter" style="color: #718096 !important">
      <ng-container *ngIf="quarterTab">
        <app-teams [getRange]="CurrentdateRange"></app-teams>
      </ng-container>
    </mat-tab>
    <mat-tab label="Year" style="color: #718096 !important">
      <ng-container *ngIf="yearTab">
        <app-teams [getRange]="CurrentdateRange"></app-teams>
      </ng-container>
    </mat-tab>
    <mat-tab>
      <ng-template
        mat-tab-label
      >
      <label style="padding: 0 10px; cursor: pointer;" for="openCal1">{{doublePicker.value ? doublePicker.value : 'Date Range'}}</label>
    </ng-template>
    <div style="display: none;" class="rangeField" style="position: relative; width: fit-content;">
      <input style="display: none;" id="openCal1" #doublePicker type="text" ngxDaterangepickerMd
      placeholder="Choose date" [locale]="{format: 'MM/DD/YY'}" [showCancel]= 'false'
      [showClearButton]='true' (change)="changedouble($event)" [(ngModel)]="selectedDouble" [showDropdowns]="true" [opens]="'right'" [drops]="'down'"/>
    </div>
    <ng-container *ngIf="dateRangeTab">
      <app-teams [getRange]="CurrentdateRange" [currentGroup]="currenttteam"></app-teams>
    </ng-container>
    </mat-tab>
  </mat-tab-group>
</div>
</div>


<!-- Tree Modal -->
<ng-template #content let-modal>

</ng-template>

<ng-template #longContent let-modal>
  <div class="groupTitle">
    Select Groups
  </div>
  <div class="treeContainer">

      <input class="groupFilterSearch" [value]="currentText" placeholder="Search groups" (input)="filterChanged($event.target.value)">
        <small class="invalid" *ngIf="isAnyGroup">Please select at least one group.</small>
    <mat-tree [dataSource]="dataSourceTree" [treeControl]="treeControl">
      <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding>
        <button mat-icon-button disabled></button>
        <mat-checkbox class="checklist-leaf-node"
                      [checked]="checklistSelection.isSelected(node)"
                      (change)="todoLeafItemSelectionToggle(node, $event.checked)">{{node.item | slice:0:40}}</mat-checkbox>
      </mat-tree-node>

      <mat-tree-node *matTreeNodeDef="let node; when: hasChild;" matTreeNodePadding>
        <button mat-icon-button matTreeNodeToggle
                [attr.aria-label]="'Toggle ' + node.item">
                <svg xmlns="http://www.w3.org/2000/svg" *ngIf="!treeControl.isExpanded(node)" height="20" width="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" *ngIf="treeControl.isExpanded(node)" height="20" width="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                </svg>
          <!-- <mat-icon class="mat-icon-rtl-mirror">
            {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
          </mat-icon> -->
        </button>
        <mat-checkbox [checked]="checklistSelection.isSelected(node)"
                   (change)=" saveSelectedNodes(node, $event)">{{node.item | slice:0:40}}</mat-checkbox>
      </mat-tree-node>
    </mat-tree>
  </div>

  <div class="groupBtns">
    <button class="CloseBtn" (click)="modal.close('Close click')">Close</button>
    <button class="ApplyBtn" (click)="onApplyGroups();">Apply</button>
  </div>
</ng-template>
